<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8"/>
	<meta name="description" content="Turn your browser into a notepad."/>
	<title>Notes in your browser</title>
	<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/themes/base/jquery-ui.css" />
	<link rel="stylesheet" type="text/css" href="/css/webnoted.css">

	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js"></script>
	<script type="text/javascript" src="/js/jquery.webnoted.js"></script>
</head>
<body>
	<div id="header">
		<h1>Take a quick note. Share a quick thought.</h1>
	</div>

	<textarea id="webpad" value="test" disabled><?php echo $note; ?></textarea>
	<div id="sidebar">
		<div id="about" class="sidebarBox">
			<h2>About</h2>
			<p>WebNoted turns your browser into a notepad.</p>
			<h2>Usage</h2>
			<p>Simply start typing. Your notes are automatically saved.</p>
			
			<hr />
			
			<h2>Status</h2>
			<p id="char-count">Characters: <span>0</span></p>
			<p id="status-message">test</p>
			<h2>Options</h2>
			<p id="crud">
				<span><a href="#" id="create" class="jsManageContents">Create</a></span> | 
				<span><a href="#" id="save" class="jsManageContents">Save</a></span> |
				<span><a href="#" id="clear" class="jsManageContents">Clear</a></span>
			</p>
			<p><a href="#" id="share" class="jsManageContents">Share this note</a></p>
			<p><a href="/" id="home">Return to my note</a></p>
			
			<div id="history-container">
				<hr />
				<h2>History</h2>
				<select id="history"></select>
			</div>
		</div>
	</div>
	
	<div id="share-message" title="Share">
		<p>Paste link in <strong>email</strong> or <strong>IM</strong>:</p>
		<input type="text" style="width: 100%" />
		<p class="foot-note">* Shared links are not editable. Changes made after generating the link won't be viewable until you share a new link.</p>
	</div>
	
	<script type="text/javascript">
		$(function(){var webNoted=$("#webpad");var counterElement=$("#char-count span");var historyElement=$("#history");var dataStore=new WNDataStore(localStorage);var shareDialogElement=$("#share-message");var noteId="<?php echo $noteId ?>";shareDialogElement.dialog({autoOpen:false,modal:true,resizable:false,draggable:false});webNoted.webNoted({"apiURL":"http://api.webnoted.com/","dataStore":dataStore,"noteId":noteId}).on("resizeWebNoted",function(){$(this).height($(document).height()-88)}).on("shareLinkGenerated",function(){var url="http://www.webnoted.com/"+webNoted.webNoted("getSharedHash");var shared=shareDialogElement.find("input");shared.val(url).focus(function(){this.select()});shareDialogElement.dialog("open");shared.attr("readonly",true)}).on("contentChanged",function(){setTimeout(function(){counterElement.html(webNoted.webNoted("count"))},0)}).on("noteCreated",function(){var documentName=webNoted.webNoted("getCurrentDocument");historyElement.append('<option value="'+documentName+'" selected="selected">'+documentName+"</option>")}).trigger("resizeWebNoted").trigger("contentChanged");$.each(webNoted.webNoted("getSavedNotes"),function(key,value){var currentDocument=webNoted.webNoted("getCurrentDocument");historyElement.append('<option value="'+value+'">'+value+"</option>");if(currentDocument===value)historyElement.val(value).attr("selected",true)});historyElement.on("change",function(){webNoted.webNoted("switchDocument",$(this).val())});$("#sidebar .jsManageContents").click(function(){var e=$(this);var status=$("#status-message");var statusText="";var action=e.attr("id");var timeout=1E3;if(action==="save")statusText="Contents saved";else if(action==="clear")statusText="Contents cleared";else if(action==="share")statusText="Generating Link";webNoted.webNoted(action);status.text(statusText).show("fast");setTimeout(function(){status.hide("fast")},timeout)});$(window).resize(function(){webNoted.trigger("resizeWebNoted")}).on("beforeunload",function(){webNoted.webNoted("save")});if(noteId=="")$("#home").hide();else $("#crud, #share, #history-container").hide();$("body").show()});function WNDataStore(storageType){this.storageType=storageType;this.setItem=function(itemName,itemValue){this.storageType.setItem(itemName,itemValue)};this.getItem=function(itemName){return this.storageType.getItem(itemName)};this.removeItem=function(itemName){this.storageType.removeItem(itemName)};this.getLength=function(){return this.storageType.length};this.getStorageType=function(){return this.storageType}};
	</script>
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-947207-15']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>
</body>
</html>
